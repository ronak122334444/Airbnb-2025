<!DOCTYPE html>
<html lang="en">



    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="description" content="Panagea - Premium site template for travel agencies, hotels and restaurant listing.">
        <meta name="author" content="Ansonika">
        <!--<title>Panagea | Premium site template for travel agencies, hotels and restaurant listing.</title>-->


        <link rel="shortcut icon" href="img/favicon.ico" type="image/x-icon">
        <link rel="apple-touch-icon" type="image/x-icon" href="img/apple-touch-icon-57x57-precomposed.png">
        <link rel="apple-touch-icon" type="image/x-icon" sizes="72x72" href="img/apple-touch-icon-72x72-precomposed.png">
        <link rel="apple-touch-icon" type="image/x-icon" sizes="114x114" href="img/apple-touch-icon-114x114-precomposed.png">
        <link rel="apple-touch-icon" type="image/x-icon" sizes="144x144" href="img/apple-touch-icon-144x144-precomposed.png">

        <!-- GOOGLE WEB FONT -->
        <link rel="preconnect" href="https://fonts.gstatic.com/">
        <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&amp;display=swap" rel="stylesheet">

        <!-- BASE CSS -->
        <link href="css/bootstrap.min.css" rel="stylesheet">
        <link href="css/style.css" rel="stylesheet">
        <link href="css/vendors.css" rel="stylesheet">

        <!-- ALTERNATIVE COLORS CSS -->
        <link href="#" id="colors" rel="stylesheet">
        <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

        <script>
            function go()
            {
                const urlParams = new URLSearchParams(window.location.search);
                const id = urlParams.get("id");
                var url = `/editownerreturn?id=${id}`;
                fetch(url, {method: "get"})
                        .then(response => response.text())
                        .then(ans => render1(ans));
            }

            function render1(ans)
            {
                var obj = JSON.parse(ans);  // Parse the JSON string into an object
                //  alert(obj)
                // Check if 'ans' array exists and is not empty
                if (obj.ans && obj.ans.length > 0) {

                    document.getElementById("email").value = obj.ans[0].owner_email;
                    document.getElementById("propertyname").value = obj.ans[0].property_name;
                    document.getElementById("price").value = obj.ans[0].price;
                    document.getElementById("oprice").value = obj.ans[0].offer_price;
                    document.getElementById("address").value = obj.ans[0].address;
                    document.getElementById("pdes").value = obj.ans[0].description;


                } else {
                    alert("No data available in the 'ans' array");
                 }
        }
            
            
            function edit(){
                const urlParams = new URLSearchParams(window.location.search);
                const id = urlParams.get("id");
                
                
                var email=document.getElementById("email").value;
                var propertyname = document.getElementById("propertyname").value;
                var price = document.getElementById("price").value;
                var oprice = document.getElementById("oprice").value;
                var address = document.getElementById("address").value;
                var des = document.getElementById("pdes").value;
                
                var url = "/editowner";
                var formdata = new FormData();
                formdata.append("email", email);
                formdata.append("propertyname", propertyname);
                formdata.append("price", price);
                formdata.append("oprice", oprice);
                formdata.append("address", address);
                formdata.append("pdes", des);
                formdata.append("id", id);
                fetch(url, {method: "Post", body: formdata})
                        .then(response => response.text())
                        .then(ans => renderAsHtml(ans));
            }



            function renderAsHtml(ans)
            {
                alert(ans)
                if (ans === "success")
                {
                    alert("added")
                    Swal.fire({
                        icon: 'success',
                        title: 'owner edited!',
                        text: 'You have successfully changed the ceredentials!',
                        showConfirmButton: true,
                        confirmButtonColor: '#3085d6', // Custom button color
                        background: '#f4f6f9' // Light background for aesthetics
                    }).then((result) => {
                        if (result.isConfirmed) {
//                            window.location.href = "/onwerhome";
                        }
                    });
            
                } else if ("fail")
                {
                    alert("failed")
                     Swal.fire({
                        icon: "error",
                        title: "ceredentials can not be changed",
                        showConfirmButton: false,
                        timer: 3000
                    });
                    setTimeout(3000);
                     }
                    }
        </script>


    </head>

    <body id="register_bg" onload="go()">
        <!--


        <nav id="menu" class="fake_menu"></nav>

        <div id="preloader">
            <div data-loader="circle-side"></div>
        </div>
        <!-- End Preload -->

        <div id="login">
            <aside>
                <!--                <figure>
                                    <a href="index-2.html"><img src="img/logo_sticky.svg" width="155" height="36" alt="" ></a>
                                </figure>-->
                <form>

                    <div class="form-group">
                        <label>Enter email</label>
                        <input class="form-control" type="text" id="email" readonly="email">
                        <i class="icon_mail_alt"></i>
                    </div>
                    <div class="form-group">
                        <label>Enter Hotel/Villa Name</label>
                        <input class="form-control" type="text" id="propertyname">
                        <i class="icon_mail_alt"></i>
                    </div>

                    <!--                    <div class="form-group" >
                                         <label>Enter Property type</label>
                                            <input class="form-control" type="text" id="pname">
                                        </div>-->

                    <div class="form-group">
                        <label>enter price</label>
                        <input class="form-control" type="text" id="price">
                        <i class="icon_mail_alt"></i>
                    </div>
                    <div class="form-group">
                        <label>Enter offer price</label>
                        <input class="form-control" type="text" id="oprice">
                        <i class="icon_mail_alt"></i>
                    </div>

                    <!--                    <div class="form-group" >
                                        <label>Enter City</label>
                                        <input class="form-control" type="text" id="city">
                                        <i class="icon_mail_alt"></i>
                                        </div>-->

                    <div class="form-group">
                        <label>Enter Address</label>
                        <input class="form-control" type="text" id="address">
                        <i class="icon_lock_alt"></i>
                    </div>
                    <div class="form-group">
                        <label>Enter description</label>
                        <input class="form-control" type="text" id="pdes">
                        <i class="icon_lock_alt"></i>
                    </div>




                    <!--                    <div class="form-group">
                                            <label> Property photo</label>
                                            <input class="form-control" type="file" accept="image/*"  placeholder="photo" id="pphoto">
                    
                    
                                            <i class="icon_mail_alt"></i>
                                        </div>-->
                    <div id="pass-info" class="clearfix"></div>
                    <button type="button" class="btn_1 rounded full-width" onclick="edit()" style=" text-align: center;">edit</button>


            </aside>







            <script src="js/common_scripts.js"></script>
            <script src="js/main.js"></script>
            <script src="phpmailer/validate.js"></script>

            <!-- SPECIFIC SCRIPTS -->
            <script src="js/pw_strenght.js"></script>

            <!-- COLOR SWITCHER  -->
<!--            <script src="js/switcher.js"></script>-->
<!--            <div id="style-switcher">
                <h6>Color Switcher <a href="#"><i class="ti-settings"></i></a></h6>
                <div>
                    <ul class="colors" id="color1">
                        <li>
                            <a href="#" class="default" title="Default"></a>
                        </li>
                        <li>
                            <a href="#" class="aqua" title="Aqua"></a>
                        </li>
                        <li>
                            <a href="#" class="green_switcher" title="Green"></a>
                        </li>
                        <li>
                            <a href="#" class="orange" title="Orange"></a>
                        </li>
                        <li>
                            <a href="#" class="blue" title="Blue"></a>
                        </li>
                        <li>
                            <a href="#" class="beige" title="Beige"></a>
                        </li>
                        <li>
                            <a href="#" class="gray" title="Gray"></a>
                        </li>
                        <li>
                            <a href="#" class="green-2" title="Green"></a>
                        </li>
                        <li>
                            <a href="#" class="navy" title="Navy"></a>
                        </li>
                        <li>
                            <a href="#" class="peach" title="Peach"></a>
                        </li>
                        <li>
                            <a href="#" class="purple" title="Purple"></a>
                        </li>
                        <li>
                            <a href="#" class="red" title="Red"></a>
                        </li>
                        <li>
                            <a href="#" class="violet" title="Violet"></a>
                        </li>
                    </ul>
                </div>
            </div>
-->




    </body>


</html>